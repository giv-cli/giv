### **Outstanding Tasks for Version 0.4.0**

**Refactoring:**
- Modularize the `summarize_target()` and `summarize_commit()` functions in `history.sh`.
  - Ensure edge cases like invalid commits or empty diffs are handled.

**Testing:**
- Expand tests for `summarize_target()` and `summarize_commit()` in `summarize_target.bats`.
- Increase automated testing coverage for text insertion and token replacement functions.

**Documentation:**
- Update the roadmap and README to reflect completed and pending tasks.

---

### **Completed Tasks**

**Configuration Enhancements:**
- Implemented the polished `parse_args()` function in `args.sh`.
- Added `.giv` initialization logic via `ensure_giv_dir_init` in `system.sh`.

**Bug Fixes:**
- Resolved the `--api-key` parsing issue in `args.sh`.

**Testing:**
- Added tests for `.giv` initialization in `test_giv_init.bats`.
- Added tests for `replace_tokens` in `replace_tokens.bats`.

---

### **Implementation Plan for Remaining Tasks**

#### **Modularize `summarize_target()` and `summarize_commit()`**
- **Steps:**
  1. Break down `summarize_target()` into smaller, reusable functions.
  2. Refactor `summarize_commit()` to handle edge cases and improve readability.

#### **Expand Testing Coverage**
- **Steps:**
  1. Add unit tests for modularized `summarize_target()` and `summarize_commit()`.
  2. Expand tests for text insertion and token replacement functions.

#### **Update Documentation**
- **Steps:**
  1. Update the roadmap to reflect completed tasks.
  2. Ensure README includes details of new features and fixes.
